#!/usr/bin/bash

###
# $1 needs to point to the toplevel CMakeLists.txt
#
CML=$1
if [ -z "$CML" ]; then
    if [ -f "CMakeLists.txt" ]; then
        CML="CMakeLists.txt"
    elif [ -f "../CMakeLists.txt" ]; then
            CML=../CMakeLists.txt
    else
        echo "Could not find Cmake file"
        exit 1
    fi
fi


project_line=`grep '^project(' $CML | sed 's/[()]/ /g'`
PROJ=`echo "${project_line}" | awk '{ print $2; }'`
VERSION=`echo "${project_line}" | awk '{ print $4; }'`

cat <<_HERE_
SF_PROJECT="$PROJ"
SF_VERSION="$VERSION"
_HERE_
